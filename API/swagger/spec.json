{"openapi":"3.0.0","info":{"title":"mangapi","version":"1.0.0"},"paths":{"/account/nb":{"get":{"tags":["Account"],"description":"Renvoie un string correspond au nombre d'occurrences dans la table","responses":{"200":{"$ref":"#/components/responses/Count"},"500":{"description":"Erreur serveur"}}}},"/account/admin":{"get":{"tags":["Account"],"description":"Renvoie un objet.","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Renvoie un objet contenant un booléen admin","content":{"text/plain":{"schema":{"type":"object","properties":{"admin":{"type":"boolean"}}}}}},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeAdmin"},"500":{"description":"Erreur serveur"}}}},"/account/all/{offset}":{"get":{"tags":["Account"],"description":"Renvoie un objet contenant un ensemble d'objet de type account. La taille de l'objet renvoyé est limiter par la requête sql. (2 temporairement pour les tests)","parameters":[{"name":"offset","description":"Nombre permettant de séléctionner les occurences d'une table a partir de celui-ci","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/AccountList"},"404":{"description":"La liste des comptes n'a pas été trouvée"},"500":{"description":"Erreur serveur"}}}},"/account/{id}":{"get":{"tags":["Account"],"description":"Renvoie les infos de l'utilisateur correspondant à l'id.","parameters":[{"name":"id","description":"ID d'un account","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/AccountGet"},"400":{"description":"L'id passé n'est pas un nombre - Erreur imputable à l'utilisateur."},"404":{"description":"Account non trouvé"},"500":{"description":"Erreur serveur"}}}},"/account/login":{"post":{"tags":["Account"],"description":"Renvoie un JWT token permettant l'identification.","requestBody":{"description":"login et password pour la connexion","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Login"}}}},"responses":{"200":{"description":"un token JWT","content":{"text/plain":{"schema":{"type":"string"}}}},"400":{"description":"Login ou password non définis - Erreur imputable au client"},"404":{"description":"Ressource demandée inexistante"},"500":{"description":"Erreur serveur"}}}},"/account/inscription":{"post":{"tags":["Account"],"description":"Permet l'inscription d'une personne en verifiant les données passées dans le body","requestBody":{"description":"Toutes les attribut de la table sont passé dans le body pour l'inscription. Admin sera toujours a false. Seul un administrateur peut ajouter un nouveau administrateur.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Inscription"}}}},"responses":{"201":{"description":"Inscription réussi"},"400":{"description":"Une ou plusieurs données required ne sont pas défénis - Erreur imputable au client."},"403":{"description":"Le login d'inscription existe déjà.","content":{"text/plain":{"schema":{"$ref":"#/components/schemas/VerifAccount"}}}},"500":{"description":"Erreur serveur"}}}},"/account/":{"patch":{"tags":["Account"],"description":"Permet de faire une mise a jour d'un compte","security":[{"bearerAuth":[]}],"requestBody":{"description":"Toutes les données d'un utilisateur -> id, login, password, email, ... sont passé dans le body pour la mise à jour du client ainsi que le token dans le headers.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}},"responses":{"201":{"$ref":"#/components/responses/AccountUpdate"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"500":{"description":"Erreur serveur"}}},"delete":{"tags":["Account"],"description":"Permet de supprimer un compte","security":[{"bearerAuth":[]}],"requestBody":{"description":"L'id du compte est passé dans le body pour la suppression ainsi que le token dans le headers.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountDelete"}}}},"responses":{"204":{"$ref":"#/components/responses/AccountDelete"},"400":{"$ref":"#/components/responses/ErrorJWT"},"401":{"$ref":"#/components/responses/MissingJWT"},"403":{"$ref":"#/components/responses/mustBeOwner"},"404":{"$ref":"#/components/responses/AccountDeleteFailed"},"500":{"description":"Erreur serveur"}}}},"/followedManga/nb":{"get":{"tags":["FollowedManga"],"description":"Renvoie un string correspond au nombre d'occurrences dans la table","responses":{"200":{"$ref":"#/components/responses/Count"},"500":{"description":"Erreur serveur"}}}},"/followedManga/all/{offset}":{"get":{"tags":["FollowedManga"],"description":"Renvoie un objet contenant un ensemble d'objet de type account. La taille de l'objet renvoyé est limiter par la requête sql. (2 temporairement pour les tests)","parameters":[{"name":"offset","description":"Nombre permettant de séléctionner les occurences d'une table a partir de celui-ci","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/FollowedMangaList"},"404":{"description":"La liste des mangas suvit n'a pas été trouvée"},"500":{"description":"Erreur serveur"}}}},"/manga/nb":{"get":{"tags":["Manga"],"description":"Renvoie un string correspond au nombre d'occurrences dans la table","responses":{"200":{"$ref":"#/components/responses/Count"},"500":{"description":"Erreur serveur"}}}},"/manga/all/{offset}":{"get":{"tags":["Manga"],"description":"Renvoie un objet contenant un ensemble d'objet de type account. La taille de l'objet renvoyé est limiter par la requête sql. (2 temporairement pour les tests)","parameters":[{"name":"offset","description":"Nombre permettant de séléctionner les occurences d'une table a partir de celui-ci","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/MangaList"},"404":{"description":"La liste des mangas n'a pas été trouvée"},"500":{"description":"Erreur serveur"}}}},"/readedTome/nb":{"get":{"tags":["ReadedTome"],"description":"Renvoie un string correspond au nombre d'occurrences dans la table","responses":{"200":{"$ref":"#/components/responses/Count"},"500":{"description":"Erreur serveur"}}}},"/readedTome/all/{offset}":{"get":{"tags":["ReadedTome"],"description":"Renvoie un objet contenant un ensemble d'objet de type account. La taille de l'objet renvoyé est limiter par la requête sql. (2 temporairement pour les tests)","parameters":[{"name":"offset","description":"Nombre permettant de séléctionner les occurences d'une table a partir de celui-ci","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/ReadedTomeList"},"404":{"description":"La liste des tomes lu n'a pas été trouvée"},"500":{"description":"Erreur serveur"}}}},"/tome/nb":{"get":{"tags":["Tome"],"description":"Renvoie un string correspond au nombre d'occurrences dans la table","responses":{"200":{"$ref":"#/components/responses/Count"},"500":{"description":"Erreur serveur"}}}},"/tome/all/{offset}":{"get":{"tags":["Tome"],"description":"Renvoie un objet contenant un ensemble d'objet de type account. La taille de l'objet renvoyé est limiter par la requête sql. (2 temporairement pour les tests)","parameters":[{"name":"offset","description":"Nombre permettant de séléctionner les occurences d'une table a partir de celui-ci","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"$ref":"#/components/responses/TomeList"},"404":{"description":"La liste des tomes n'a pas été trouvée"},"500":{"description":"Erreur serveur"}}}}},"components":{"schemas":{"Login":{"type":"object","properties":{"login":{"type":"string"},"password":{"type":"string","format":"password"}},"required":["login","password"]},"Inscription":{"type":"object","properties":{"login":{"type":"string"},"pswd":{"type":"string","format":"password"},"email":{"type":"string"},"birthdate":{"type":"object","format":"date"},"phone":{"type":"string"},"picture":{"type":"object","format":"image"},"is_admin":{"type":"boolean"}},"required":["login","pswd","email"]},"AccountList":{"type":"object","properties":{"id_user":{"type":"integer"},"login":{"type":"string"},"pswd":{"type":"string","format":"text"},"email":{"type":"string"},"birthdate":{"type":"object","format":"date"},"phone":{"type":"number"},"picture":{"type":"object","format":"image"},"is_admin":{"type":"boolean"}}},"Count":{"type":"string"},"Account":{"type":"object","properties":{"id_user":{"type":"integer"},"login":{"type":"string"},"pswd":{"type":"string","format":"text"},"email":{"type":"string"},"birthdate":{"type":"object","format":"date"},"phone":{"type":"number"},"picture":{"type":"object","format":"image"},"is_admin":{"type":"boolean"}}},"AccountDelete":{"type":"object","properties":{"id_user":{"type":"integer"}}},"AccountDeleteFailed":{"type":"object","properties":{"error":{"type":"string"}}},"FollowedMangaList":{"type":"object","properties":{"id_followed_manga":{"type":"integer"},"state":{"type":"integer"},"fk_manga":{"type":"integer"},"fk_user":{"type":"integer"}}},"MangaList":{"type":"object","properties":{"id_manga":{"type":"integer"},"title":{"type":"string"},"synopsis":{"type":"string"},"new_price":{"type":"integer"},"type":{"type":"string"},"sub_genre":{"type":"string"},"author":{"type":"string"},"publisher":{"type":"string"},"picture":{"type":"object"},"is_finish":{"type":"boolean"}}},"ReadedTomeList":{"type":"object","properties":{"id_readed_tome":{"type":"integer"},"read_at":{"type":"string"},"fk_followed_manga":{"type":"integer"},"fk_user":{"type":"integer"},"fk_tome":{"type":"integer"}}},"TomeList":{"type":"object","properties":{"id_tome":{"type":"integer"},"number":{"type":"integer"},"title":{"type":"string"},"picture":{"type":"object"},"release_date":{"type":"object","format":"date"},"is_last_tome":{"type":"boolean"},"fk_manga":{"type":"integer"}}},"VerifAccount":{"type":"object","properties":{"exist":{"type":"boolean"}}}},"responses":{"AccountList":{"description":"renvoie la liste des comptes à partir du offset (limiter a n)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountList"}}}},"Count":{"description":"Le nombre de comptes utilisateur dans la table","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Count"}}}},"AccountGet":{"description":"Le compte a été trouvé","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Account"}}}},"AccountUpdate":{"description":"Le compte a été mis à jour"},"AccountDelete":{"description":"Le compte a été supprimer"},"AccountDeleteFailed":{"description":"Une erreur est survenue lors de la supression du comptes","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AccountDeleteFailed"}}}},"FollowedMangaList":{"description":"renvoie la liste des comptes à partir du offset (limiter a n)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FollowedMangaList"}}}},"MangaList":{"description":"renvoie la liste des comptes à partir du offset (limiter a n)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MangaList"}}}},"ReadedTomeList":{"description":"renvoie la liste des comptes à partir du offset (limiter a n)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReadedTomeList"}}}},"TomeList":{"description":"renvoie la liste des comptes à partir du offset (limiter a n)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TomeList"}}}},"mustBeAdmin":{"description":"L'action demandée ne peut être réalisée que par un administrateur"},"mustBeOwner":{"description":"L'action demandée ne peut être réalisée que par un administrateur ou un client."},"ErrorJWT":{"description":"le JWT n'est pas valide"},"MissingJWT":{"description":"le JWT n'est pas présent"}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}